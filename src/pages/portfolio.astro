---
import Layout from '../layouts/Layout.astro';
import Project from '../components/Project.astro';
import Button from '../components/Button.astro';
import Background from '../components/Background.astro';

const projectDetails = [
    {
        projectName: "ChatGPT VSCode Extension",
        projectLink: "https://github.com/lealj/theasdfllmext",
        projectDescription: `Developed a Visual Studio Code extension in TypeScript that 
            enables users to generate AI prompts and interact with LLMs directly within the IDE.
            Developed a user-friendly UI panel in VS Code, enabling interaction with AI model for generating and refining
            prompts.`,
        imageUrl: "/exampleProjectImage.PNG"
    },
    {
        projectName: "DownAndSync - YouTube Music to Plex Media Server",
        projectLink: "https://github.com/username/project2",
        projectDescription: `Developed Python desktop app facilitating music migration from Youtube liked-videos to
            Plex Media Server.
            Used threads to download videos and monitor for new liked videos, regularly syncing liked-videos on Youtube with
            personal music directory.
            Used SQLite to store user music data.
            Setup Github Actions (CI) to build artifact on merges with master branch (CD setup in progress).`,
        imageUrl: "/exampleProjectImage.PNG"
    },
    {
        projectName: "Portfolio",
        projectLink: "https://github.com/username/project2",
        projectDescription: "This is the second project description.",
        imageUrl: "/exampleProjectImage.PNG"
    },
    {
        projectName: "Frank & Son Towing",
        projectLink: "https://github.com/username/project2",
        projectDescription: "This is the second project description.",
        imageUrl: "/exampleProjectImage.PNG"
    },
    {
        projectName: "Stock Mocket",
        projectLink: "https://github.com/username/project2",
        projectDescription: "This is the second project description.",
        imageUrl: "/exampleProjectImage.PNG"
    },
    {
        projectName: "CNT Project",
        projectLink: "https://github.com/username/project2",
        projectDescription: "This is the second project description.",
        imageUrl: "/exampleProjectImage.PNG"
    }
];
---
<style>
    .portfolio-container {
        display: flex;
        width: 1200px;
        flex-direction: column;
        justify-self: center;
    }
    .main-container {
        display: flex;
        justify-content: space-between;
        margin-top: 5em;
    }
    .left-container {
        padding-left: 9em;
        flex: 1;
    }
    .right-container {
        flex: 1;
        padding-right: 2em;
        display: flex;
        flex-direction: column;
    }
    .box-title-container {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        
    }
</style>
<Layout>
    <div class="main-container">
        <Background />
        <div class="left-container">
            <main>
                <table>
                    <tbody>
                        {projectDetails.map((proj, index) => (
                            <tr>
                                <td class="box-title-container">
                                    <Button projectName={proj.projectName} index={index} />
                                </td>
                            </tr>
                        ))}
                        <script define:vars={{projectDetails}}>

                            // Buttons (attach event listeners)
                            const buttons = document.querySelectorAll('.title-button');
                            buttons.forEach((button) => {
                                button.addEventListener('click', () => {
                                    const index = button.getAttribute('data-index');
                                    const project = projectDetails[index];

                                    const projCont = document.querySelector('.project-container');
                                    projCont.innerHTML = `
                                        <div>
                                            <h3>${project.projectName}</h3>
                                            <div style="width: 100%; height: 300px; overflow: hidden; display: flex;">
                                                <img src="${project.imageUrl}" alt="${project.projectName}" class="project-image" style="object-fit: cover; max-width: 100%; max-height: 100%;"/>
                                            </div>
                                        </div>
                                        <a href="${project.projectLink}">View Github</a>
                                        <p class="project-desc">${project.projectDescription}</p>
                                    `;

                                    buttons.forEach(btn => btn.classList.remove('selected'));
                                    button.classList.add('selected');
                                });
                            });
                        </script>
                    </tbody>
                </table>
            </main>
        </div>
        <div class="right-container">
            <Project
            projectName={projectDetails[0].projectName}
            projectLink={projectDetails[0].projectLink}
            projectDescription={projectDetails[0].projectDescription}
            imageUrl={projectDetails[0].imageUrl}
            />
        </div> 
    </div>
</Layout>